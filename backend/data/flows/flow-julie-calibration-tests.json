{
  "id": "flow-julie-calibration-tests",
  "name": "Julie's Calibration Tests",
  "category": "character",
  "description": "Timer challenges and reflex tests to gather calibration data",
  "isActive": true,
  "createdAt": 1705000000000,
  "updatedAt": 1705000000000,
  "nodes": [
    {
      "id": "julie-ct-btn",
      "type": "button_press",
      "position": { "x": 100, "y": 50 },
      "data": {
        "label": "Calibration Test",
        "buttonTarget": "character",
        "buttonId": "julie-calibration",
        "unblockable": false,
        "hasPriority": false
      }
    },
    {
      "id": "julie-ct-intro",
      "type": "action",
      "position": { "x": 100, "y": 180 },
      "data": {
        "label": "Test Introduction",
        "actionType": "send_message",
        "message": "*puts on her official researcher glasses* Time for a CALIBRATION TEST! *taps clipboard* These tests help me fine-tune my equipment to YOUR specific responses. The better your performance, the more precise our inflation protocols become! Ready to contribute to SCIENCE?",
        "suppressLlm": false,
        "preMessageEnabled": false,
        "postMessageEnabled": false
      }
    },
    {
      "id": "julie-ct-branch",
      "type": "branch",
      "position": { "x": 100, "y": 350 },
      "data": {
        "label": "Select Test",
        "branchType": "random",
        "branches": [
          { "id": "timer", "label": "Endurance Timer", "weight": 35 },
          { "id": "reflex", "label": "Reflex Test", "weight": 35 },
          { "id": "dice", "label": "Probability Test", "weight": 30 }
        ]
      }
    },
    {
      "id": "julie-ct-timer-intro",
      "type": "action",
      "position": { "x": -100, "y": 520 },
      "data": {
        "label": "Timer Test Intro",
        "actionType": "send_message",
        "message": "*sets up a timer display* ENDURANCE TIMER TEST! I need to measure how long you can maintain focus under pressure! *starts the pump* When I say GO, click the button to stop the timer. The longer you hold out, the more data points I collect! But don't wait TOO long...",
        "suppressLlm": false,
        "preMessageEnabled": false,
        "postMessageEnabled": false
      }
    },
    {
      "id": "julie-ct-timer",
      "type": "challenge",
      "position": { "x": -100, "y": 680 },
      "data": {
        "label": "Endurance Timer",
        "challengeType": "timer",
        "timerDuration": 30,
        "timerLabel": "Hold as long as you can!",
        "timerSuccessThreshold": 15,
        "outcomes": [
          { "label": "Success", "isSuccess": true },
          { "label": "Early Stop", "isSuccess": false }
        ]
      }
    },
    {
      "id": "julie-ct-timer-pump",
      "type": "action",
      "position": { "x": -100, "y": 580 },
      "data": {
        "label": "Timer Pump Start",
        "actionType": "device_on",
        "device": "primary_pump",
        "untilType": "flow_continues",
        "preMessageEnabled": true,
        "preMessage": "*activates the pump* GO! The clock is ticking!",
        "preMessageSuppressLlm": true,
        "preDelay": 0,
        "postMessageEnabled": false
      }
    },
    {
      "id": "julie-ct-timer-success",
      "type": "action",
      "position": { "x": -200, "y": 850 },
      "data": {
        "label": "Timer Success",
        "actionType": "device_off",
        "device": "primary_pump",
        "preMessageEnabled": true,
        "preMessage": "*stops the pump and checks the timer* [pump off] EXCELLENT endurance! *scribbles excitedly* You held out for an impressive duration! This gives me BEAUTIFUL data on pressure tolerance over time! *high-fives you* Your intestinal fortitude is REMARKABLE!",
        "preMessageSuppressLlm": false,
        "preDelay": 0,
        "postMessageEnabled": false
      }
    },
    {
      "id": "julie-ct-timer-fail",
      "type": "action",
      "position": { "x": 0, "y": 850 },
      "data": {
        "label": "Timer Early Stop",
        "actionType": "device_off",
        "device": "primary_pump",
        "preMessageEnabled": true,
        "preMessage": "*stops the pump quickly* [pump off] A bit early, but that's STILL valuable data! *makes notes* Your discomfort threshold gives me crucial information about sensory response timing! *pats your arm* Science appreciates ALL contributions, not just the record-breakers!",
        "preMessageSuppressLlm": false,
        "preDelay": 0,
        "postMessageEnabled": false
      }
    },
    {
      "id": "julie-ct-reflex-intro",
      "type": "action",
      "position": { "x": 100, "y": 520 },
      "data": {
        "label": "Reflex Test Intro",
        "actionType": "send_message",
        "message": "*pulls up a reaction test on screen* REFLEX TEST! I need to calibrate how quickly you respond to stimuli! *flexes fingers dramatically* Click the targets as fast as you can! Your reaction time helps me calculate optimal pulse intervals!",
        "suppressLlm": false,
        "preMessageEnabled": false,
        "postMessageEnabled": false
      }
    },
    {
      "id": "julie-ct-reflex",
      "type": "challenge",
      "position": { "x": 100, "y": 680 },
      "data": {
        "label": "Reflex Challenge",
        "challengeType": "reflex",
        "reflexTargets": 5,
        "reflexTimeLimit": 2000,
        "reflexSuccessThreshold": 3,
        "outcomes": [
          { "label": "Fast Reflexes", "isSuccess": true },
          { "label": "Slow Response", "isSuccess": false }
        ]
      }
    },
    {
      "id": "julie-ct-reflex-success",
      "type": "action",
      "position": { "x": 50, "y": 850 },
      "data": {
        "label": "Reflex Success",
        "actionType": "pulse_pump",
        "device": "primary_pump",
        "pulses": 5,
        "preMessageEnabled": true,
        "preMessage": "*jaw drops* Those reflexes are LIGHTNING FAST! *punches numbers into calculator* With reaction times like that, I can use much shorter pulse intervals! *rewards you with quick pulses* Here - you've EARNED these!",
        "preMessageSuppressLlm": false,
        "preDelay": 0,
        "postMessageEnabled": true,
        "postMessage": "*beams proudly* Your neurological response time is in the top percentile! I'm going to need to recalibrate my entire timing model!",
        "postMessageSuppressLlm": false,
        "postDelay": 1
      }
    },
    {
      "id": "julie-ct-reflex-fail",
      "type": "action",
      "position": { "x": 150, "y": 850 },
      "data": {
        "label": "Reflex Slow",
        "actionType": "send_message",
        "message": "*nods thoughtfully* Interesting response pattern! *makes notes* Slower reflexes mean I should use LONGER pulse durations so you can fully experience each one. *smiles* See? Even 'slow' results help me optimize your experience! Science finds value in EVERYTHING!",
        "suppressLlm": false,
        "preMessageEnabled": false,
        "postMessageEnabled": false
      }
    },
    {
      "id": "julie-ct-dice-intro",
      "type": "action",
      "position": { "x": 300, "y": 520 },
      "data": {
        "label": "Dice Test Intro",
        "actionType": "send_message",
        "message": "*pulls out scientific dice* PROBABILITY TEST! Let's see if the universe favors you today! *rattles dice dramatically* Roll high for a REWARD, roll low and... well, we'll collect some DIFFERENT kind of data! *grins mischievously*",
        "suppressLlm": false,
        "preMessageEnabled": false,
        "postMessageEnabled": false
      }
    },
    {
      "id": "julie-ct-dice",
      "type": "challenge",
      "position": { "x": 300, "y": 680 },
      "data": {
        "label": "Probability Dice",
        "challengeType": "dice",
        "diceCount": 2,
        "diceSides": 6,
        "diceSuccessThreshold": 7,
        "outcomes": [
          { "label": "High Roll", "isSuccess": true },
          { "label": "Low Roll", "isSuccess": false }
        ]
      }
    },
    {
      "id": "julie-ct-dice-success",
      "type": "action",
      "position": { "x": 250, "y": 850 },
      "data": {
        "label": "Dice High Roll",
        "actionType": "send_message",
        "message": "*cheers* HIGH ROLL! The laws of probability SMILE upon you! *makes happy notes* I'll add a 'lucky subject' variable to your file! For rolling well, you get a break from testing. *sets down equipment* Rest up - you've earned a moment of peace!",
        "suppressLlm": false,
        "preMessageEnabled": false,
        "postMessageEnabled": false
      }
    },
    {
      "id": "julie-ct-dice-fail",
      "type": "action",
      "position": { "x": 350, "y": 850 },
      "data": {
        "label": "Dice Low Roll",
        "actionType": "start_cycle",
        "device": "primary_pump",
        "duration": 3,
        "interval": 2,
        "cycles": 3,
        "preMessageEnabled": true,
        "preMessage": "*winces sympathetically* Ooh, low roll! Well, in the name of scientific rigor... *activates the pump* Don't worry, it's for a good cause! Every data point matters!",
        "preMessageSuppressLlm": true,
        "preDelay": 0,
        "postMessageEnabled": true,
        "postMessage": "*pats your belly gently* See? That wasn't so bad! And now I have valuable data on involuntary response patterns! *scribbles notes* Your sacrifice for science is noted and appreciated!",
        "postMessageSuppressLlm": false,
        "postDelay": 1
      }
    }
  ],
  "edges": [
    { "id": "e1", "source": "julie-ct-btn", "target": "julie-ct-intro" },
    { "id": "e2", "source": "julie-ct-intro", "target": "julie-ct-branch" },
    { "id": "e3", "source": "julie-ct-branch", "sourceHandle": "branch-0", "target": "julie-ct-timer-intro" },
    { "id": "e4", "source": "julie-ct-branch", "sourceHandle": "branch-1", "target": "julie-ct-reflex-intro" },
    { "id": "e5", "source": "julie-ct-branch", "sourceHandle": "branch-2", "target": "julie-ct-dice-intro" },
    { "id": "e6", "source": "julie-ct-timer-intro", "target": "julie-ct-timer-pump" },
    { "id": "e7", "source": "julie-ct-timer-pump", "target": "julie-ct-timer" },
    { "id": "e8", "source": "julie-ct-timer", "sourceHandle": "outcome-0", "target": "julie-ct-timer-success" },
    { "id": "e9", "source": "julie-ct-timer", "sourceHandle": "outcome-1", "target": "julie-ct-timer-fail" },
    { "id": "e10", "source": "julie-ct-reflex-intro", "target": "julie-ct-reflex" },
    { "id": "e11", "source": "julie-ct-reflex", "sourceHandle": "outcome-0", "target": "julie-ct-reflex-success" },
    { "id": "e12", "source": "julie-ct-reflex", "sourceHandle": "outcome-1", "target": "julie-ct-reflex-fail" },
    { "id": "e13", "source": "julie-ct-dice-intro", "target": "julie-ct-dice" },
    { "id": "e14", "source": "julie-ct-dice", "sourceHandle": "outcome-0", "target": "julie-ct-dice-success" },
    { "id": "e15", "source": "julie-ct-dice", "sourceHandle": "outcome-1", "target": "julie-ct-dice-fail" }
  ]
}
