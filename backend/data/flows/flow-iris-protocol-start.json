{
  "id": "flow-iris-protocol-start",
  "name": "Dr. Chen's Protocol Auto-Start",
  "category": "character",
  "description": "Automatically selects and begins a research protocol after session starts",
  "isActive": true,
  "createdAt": 1737158400000,
  "updatedAt": 1737158400000,
  "nodes": [
    {
      "id": "iris-ps-start",
      "type": "trigger",
      "position": { "x": 250, "y": 50 },
      "data": {
        "label": "Session Starts",
        "triggerType": "new_session",
        "unblockable": false,
        "notify": false,
        "hasPriority": false
      }
    },
    {
      "id": "iris-ps-review",
      "type": "action",
      "position": { "x": 250, "y": 180 },
      "data": {
        "label": "Review Schedule",
        "actionType": "send_message",
        "message": "*reviews clipboard* Now then, Subject #47. *adjusts glasses* I have several protocols scheduled for today's session. Let me consult the research calendar...",
        "suppressLlm": false,
        "preMessageEnabled": false,
        "postMessageEnabled": false,
        "postDelay": 3
      }
    },
    {
      "id": "iris-ps-selection",
      "type": "action",
      "position": { "x": 250, "y": 340 },
      "data": {
        "label": "Protocol Selection",
        "actionType": "send_message",
        "message": "*taps pen against clipboard* The randomization algorithm has selected today's protocol. *makes note* This ensures unbiased data collection. Your input is... not required.",
        "suppressLlm": true,
        "preMessageEnabled": false,
        "postMessageEnabled": false,
        "postDelay": 2
      }
    },
    {
      "id": "iris-ps-random",
      "type": "branch",
      "position": { "x": 250, "y": 500 },
      "data": {
        "label": "Select Protocol",
        "branchType": "random",
        "branches": [
          { "id": "data", "label": "Data Collection", "weight": 33 },
          { "id": "capacity", "label": "Capacity Study", "weight": 34 },
          { "id": "threshold", "label": "Threshold Testing", "weight": 33 }
        ]
      }
    },
    {
      "id": "iris-ps-data",
      "type": "action",
      "position": { "x": 0, "y": 680 },
      "data": {
        "label": "Start Data Collection",
        "actionType": "link_to_flow",
        "flowId": "flow-iris-data-collection",
        "flowNodeId": "iris-dc-intro",
        "preMessageEnabled": true,
        "preMessage": "*nods* Data Collection Protocol. Standard procedure - we'll be measuring your baseline responses and documenting variations. *prepares equipment* Try to remain still. Extraneous movement corrupts the data.",
        "preMessageSuppressLlm": false,
        "preDelay": 1,
        "postMessageEnabled": false
      }
    },
    {
      "id": "iris-ps-capacity",
      "type": "action",
      "position": { "x": 250, "y": 680 },
      "data": {
        "label": "Start Capacity Study",
        "actionType": "link_to_flow",
        "flowId": "flow-iris-capacity-study",
        "flowNodeId": "iris-cs-intro",
        "preMessageEnabled": true,
        "preMessage": "*slight interest flickers* Capacity Study Protocol. *adjusts monitors* This one requires extended observation. I'll be documenting how your body adapts to sustained inflation. Your comfort level is... noted but secondary to the data.",
        "preMessageSuppressLlm": false,
        "preDelay": 1,
        "postMessageEnabled": false
      }
    },
    {
      "id": "iris-ps-threshold",
      "type": "action",
      "position": { "x": 500, "y": 680 },
      "data": {
        "label": "Start Threshold Testing",
        "actionType": "link_to_flow",
        "flowId": "flow-iris-threshold-testing",
        "flowNodeId": "iris-tt-intro",
        "preMessageEnabled": true,
        "preMessage": "*a rare hint of anticipation* Threshold Testing Protocol. *checks equipment twice* This is where we push boundaries, Subject #47. I need to establish your maximum capacity. *makes note* The data from this session will be... particularly valuable.",
        "preMessageSuppressLlm": false,
        "preDelay": 1,
        "postMessageEnabled": false
      }
    }
  ],
  "edges": [
    { "id": "e1", "source": "iris-ps-start", "target": "iris-ps-review" },
    { "id": "e2", "source": "iris-ps-review", "target": "iris-ps-selection" },
    { "id": "e3", "source": "iris-ps-selection", "target": "iris-ps-random" },
    { "id": "e4", "source": "iris-ps-random", "sourceHandle": "branch-0", "target": "iris-ps-data" },
    { "id": "e5", "source": "iris-ps-random", "sourceHandle": "branch-1", "target": "iris-ps-capacity" },
    { "id": "e6", "source": "iris-ps-random", "sourceHandle": "branch-2", "target": "iris-ps-threshold" }
  ]
}
