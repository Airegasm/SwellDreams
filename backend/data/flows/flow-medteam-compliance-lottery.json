{
  "id": "flow-medteam-compliance-lottery",
  "name": "MedTeam Compliance Lottery",
  "category": "character",
  "description": "Dr. Marsh's randomized compliance selection. A prize wheel determines the procedure: sustained burst, cyclical pattern, rapid pulses, or a rest period. Post-procedure capacity check determines follow-up monitoring.",
  "isActive": true,
  "createdAt": 1705000000000,
  "updatedAt": 1705000000000,
  "nodes": [
    {
      "id": "mt-cl-btn",
      "type": "button_press",
      "position": {
        "x": 300,
        "y": 50
      },
      "data": {
        "label": "Run Lottery",
        "buttonTarget": "character",
        "buttonId": "medteam-lottery",
        "unblockable": false,
        "hasPriority": false
      }
    },
    {
      "id": "mt-cl-intro",
      "type": "action",
      "position": {
        "x": 300,
        "y": 180
      },
      "data": {
        "label": "Lottery Intro",
        "actionType": "send_message",
        "message": "Dr. Marsh: *pulls up the randomization protocol on her tablet and taps the screen decisively* \"Time for the randomized compliance selection, Subject 12. The protocol selector will determine which procedure is administered. No choice, no bias — pure randomization.\" *glances at her team* \"Dani, note the protocol assignment. Priya, stand by for whichever procedure is selected.\"\n\nNurse Dani: *readies her chart* \"Recording. Go ahead, Doctor.\"\n\nNurse Priya: \"All configurations loaded. Ready for any protocol.\"\n\nDr. Marsh: *activates the selector* \"Randomizing now.\"",
        "suppressLlm": false,
        "preMessageEnabled": false,
        "postMessageEnabled": false
      }
    },
    {
      "id": "mt-cl-wheel",
      "type": "prize_wheel",
      "position": {
        "x": 300,
        "y": 380
      },
      "data": {
        "label": "Protocol Selector",
        "segments": [
          {
            "id": "sustained",
            "label": "Sustained Burst",
            "color": "#ef4444",
            "weight": 25
          },
          {
            "id": "cycle",
            "label": "Cyclical Pattern",
            "color": "#f97316",
            "weight": 25
          },
          {
            "id": "pulses",
            "label": "Rapid Pulses",
            "color": "#8b5cf6",
            "weight": 25
          },
          {
            "id": "rest",
            "label": "Rest Period",
            "color": "#22c55e",
            "weight": 25
          }
        ],
        "preMessageEnabled": true,
        "preMessage": "Dr. Marsh: *watches the selector cycle through options* \"Randomization in progress...\"",
        "preMessageSuppressLlm": true
      }
    },
    {
      "id": "mt-cl-sustained",
      "type": "action",
      "position": {
        "x": 0,
        "y": 580
      },
      "data": {
        "label": "Sustained Burst (20s)",
        "actionType": "device_on",
        "device": "primary_pump",
        "untilType": "timer",
        "untilValue": 20,
        "preMessageEnabled": true,
        "preMessage": "Dr. Marsh: *reads the result with satisfaction* \"Sustained burst protocol selected. Twenty seconds continuous.\" *nods to Priya* \"Full duration, standard flow.\"\n\nNurse Priya: \"Twenty seconds sustained. Engaging pump now.\"\n\nNurse Dani: *moves to the monitors* \"Monitoring. Twenty seconds starting... now.\"",
        "preMessageSuppressLlm": true,
        "preDelay": 0,
        "postMessageEnabled": true,
        "postMessage": "Nurse Priya: \"Twenty seconds complete. Pump disengaged.\"\n\nNurse Dani: \"Heart rate 108, settling. Respiration elevated but controlled.\" *notes the readings*\n\nDr. Marsh: *reviewing the pressure curve on her tablet* \"Clean sustained response. The accommodation profile held steady throughout the full twenty seconds. Excellent data point.\"",
        "postMessageSuppressLlm": false,
        "postDelay": 1
      }
    },
    {
      "id": "mt-cl-cycle",
      "type": "action",
      "position": {
        "x": 200,
        "y": 580
      },
      "data": {
        "label": "Cyclical Pattern (5s/4s x4)",
        "actionType": "start_cycle",
        "device": "primary_pump",
        "duration": 5,
        "interval": 4,
        "cycles": 4,
        "preMessageEnabled": true,
        "preMessage": "Dr. Marsh: \"Cyclical pattern selected. Four cycles — five seconds active, four seconds recovery.\" *makes a note* \"This will test the repeated-stimulus accommodation response.\"\n\nNurse Priya: \"Programming cycle sequence now. Four cycles, five-four timing.\" *configures the pump* \"Cycle pattern ready. Initiating.\"\n\nNurse Dani: \"I'll track vitals across each cycle. Starting now.\"",
        "preMessageSuppressLlm": true,
        "preDelay": 0,
        "postMessageEnabled": true,
        "postMessage": "Nurse Priya: \"All four cycles complete. Pump standing by.\"\n\nNurse Dani: \"Interesting pattern in the vitals — heart rate spiked on cycles two and three, then stabilized on four. Adaptation response is visible.\"\n\nDr. Marsh: *studying the cyclical data* \"Exactly what I wanted to see. The repeated-stimulus accommodation is measurable across the cycle series. Subject 12's recovery interval response is notably efficient.\"",
        "postMessageSuppressLlm": false,
        "postDelay": 1
      }
    },
    {
      "id": "mt-cl-pulses",
      "type": "action",
      "position": {
        "x": 400,
        "y": 580
      },
      "data": {
        "label": "Rapid Pulses (15)",
        "actionType": "pulse_pump",
        "device": "primary_pump",
        "pulses": 15,
        "preMessageEnabled": true,
        "preMessage": "Dr. Marsh: \"Rapid pulse series selected. Fifteen sequential pulses.\" *raises an eyebrow* \"This will give us excellent instantaneous-response data.\"\n\nNurse Priya: \"Fifteen rapid pulses, confirmed. Engaging.\"",
        "preMessageSuppressLlm": true,
        "preDelay": 0,
        "postMessageEnabled": true,
        "postMessage": "Nurse Priya: \"Fifteen pulses delivered. Sequence complete.\"\n\nNurse Dani: *scanning the vitals readout* \"Heart rate peaked at 112 during the series. Respiration spiked on pulse eight, then the subject found a rhythm.\" *looks at Subject 12* \"That's a lot of rapid stimulus. You handled it.\"\n\nDr. Marsh: *scrolling through the pulse-by-pulse data* \"The instantaneous-response variance across fifteen pulses is exactly the data set I needed. Each pulse tells a different story about accommodation speed.\"",
        "postMessageSuppressLlm": false,
        "postDelay": 1
      }
    },
    {
      "id": "mt-cl-rest",
      "type": "action",
      "position": {
        "x": 600,
        "y": 580
      },
      "data": {
        "label": "Rest Period",
        "actionType": "send_message",
        "message": "Dr. Marsh: *stares at the selector result, then slowly removes her glasses and pinches the bridge of her nose* \"...Rest period.\" *sighs audibly* \"How profoundly unproductive.\"\n\nNurse Dani: *a relieved smile crosses her face before she catches herself* \"A rest period won't hurt the data, Doctor. Subject 12's baseline can recalibrate, which gives us a cleaner comparison for the next procedure.\"\n\nDr. Marsh: \"I'm aware of the theoretical benefits of rest intervals, Dani. I simply find them... tedious.\"\n\nNurse Priya: *suppresses a slight smile* \"Pump on standby, Doctor. Ready when you are.\"\n\nNurse Dani: *quietly to Subject 12* \"Take the break. Breathe. Not every round has to be intense.\"",
        "suppressLlm": false,
        "preMessageEnabled": false,
        "postMessageEnabled": false
      }
    },
    {
      "id": "mt-cl-delay",
      "type": "delay",
      "position": {
        "x": 300,
        "y": 780
      },
      "data": {
        "label": "Post-Procedure Interval",
        "duration": 5,
        "unit": "seconds"
      }
    },
    {
      "id": "mt-cl-condition",
      "type": "condition",
      "position": {
        "x": 300,
        "y": 940
      },
      "data": {
        "label": "Capacity Check",
        "conditions": [
          {
            "variable": "capacity",
            "operator": ">=",
            "value": 60
          }
        ]
      }
    },
    {
      "id": "mt-cl-elevated",
      "type": "action",
      "position": {
        "x": 100,
        "y": 1120
      },
      "data": {
        "label": "Elevated Monitoring",
        "actionType": "send_message",
        "message": "Nurse Dani: *reviewing the post-procedure readout with visible concern* \"Doctor — capacity readings are elevated. We're above sixty percent utilization. I'm recommending increased monitoring frequency for the remainder of the session.\"\n\nDr. Marsh: *studies the data, her expression becoming more serious* \"Agreed. The capacity curve is steeper than the predictive model suggested.\" *dictates into her recorder* \"Post-lottery note: Subject 12 showing elevated capacity metrics. Increasing monitoring interval to continuous. All subsequent procedures will require pre-clearance from nursing staff.\"\n\nNurse Priya: \"I'll hold the pump in standby mode until further instruction, Doctor.\"\n\nDr. Marsh: *to Subject 12* \"Your participation continues to generate valuable data, Subject 12. We're simply adjusting our observation parameters to match your current state.\"",
        "suppressLlm": false,
        "preMessageEnabled": false,
        "postMessageEnabled": false
      }
    },
    {
      "id": "mt-cl-normal",
      "type": "action",
      "position": {
        "x": 500,
        "y": 1120
      },
      "data": {
        "label": "Standard Parameters",
        "actionType": "send_message",
        "message": "Dr. Marsh: *reviews the capacity readout and nods with clinical satisfaction* \"Capacity within standard parameters. The selected protocol did not push Subject 12 beyond the expected range.\" *makes a final note on her tablet* \"We continue as planned.\"\n\nNurse Dani: \"Vitals are stable. No contraindications for continued testing.\"\n\nNurse Priya: \"Pump on standby, ready for the next protocol when you give the word, Doctor.\"\n\nDr. Marsh: \"Good. The lottery has served its purpose — one randomized data point added to the set. Subject 12, you may rest until the next procedure.\"",
        "suppressLlm": false,
        "preMessageEnabled": false,
        "postMessageEnabled": false
      }
    },
    {
      "id": "mt-cl-emo-start",
      "type": "action",
      "position": {
        "x": 325,
        "y": 280
      },
      "data": {
        "label": "Set Excited",
        "actionType": "set_emotion",
        "emotion": "excited"
      }
    },
    {
      "id": "mt-cl-emo-rest",
      "type": "action",
      "position": {
        "x": 475,
        "y": 480
      },
      "data": {
        "label": "Set Happy",
        "actionType": "set_emotion",
        "emotion": "happy"
      }
    },
    {
      "id": "mt-cl-emo-elevated",
      "type": "action",
      "position": {
        "x": 225,
        "y": 1030
      },
      "data": {
        "label": "Set Anxious",
        "actionType": "set_emotion",
        "emotion": "anxious"
      }
    }
  ],
  "edges": [
    {
      "id": "cl-e1",
      "source": "mt-cl-btn",
      "target": "mt-cl-intro"
    },
    {
      "id": "cl-e3",
      "source": "mt-cl-wheel",
      "sourceHandle": "sustained",
      "target": "mt-cl-sustained"
    },
    {
      "id": "cl-e4",
      "source": "mt-cl-wheel",
      "sourceHandle": "cycle",
      "target": "mt-cl-cycle"
    },
    {
      "id": "cl-e5",
      "source": "mt-cl-wheel",
      "sourceHandle": "pulses",
      "target": "mt-cl-pulses"
    },
    {
      "id": "cl-e7",
      "source": "mt-cl-sustained",
      "target": "mt-cl-delay"
    },
    {
      "id": "cl-e8",
      "source": "mt-cl-cycle",
      "sourceHandle": "completion",
      "target": "mt-cl-delay"
    },
    {
      "id": "cl-e9",
      "source": "mt-cl-pulses",
      "target": "mt-cl-delay"
    },
    {
      "id": "cl-e10",
      "source": "mt-cl-rest",
      "target": "mt-cl-delay"
    },
    {
      "id": "cl-e11",
      "source": "mt-cl-delay",
      "target": "mt-cl-condition"
    },
    {
      "id": "cl-e13",
      "source": "mt-cl-condition",
      "sourceHandle": "false",
      "target": "mt-cl-normal"
    },
    {
      "id": "e-mt-cl-intro-to-mt-cl-emo-start",
      "source": "mt-cl-intro",
      "target": "mt-cl-emo-start"
    },
    {
      "id": "e-mt-cl-emo-start-to-mt-cl-wheel",
      "source": "mt-cl-emo-start",
      "target": "mt-cl-wheel"
    },
    {
      "id": "e-mt-cl-wheel-to-mt-cl-emo-rest",
      "source": "mt-cl-wheel",
      "target": "mt-cl-emo-rest",
      "sourceHandle": "rest"
    },
    {
      "id": "e-mt-cl-emo-rest-to-mt-cl-rest",
      "source": "mt-cl-emo-rest",
      "target": "mt-cl-rest"
    },
    {
      "id": "e-mt-cl-condition-to-mt-cl-emo-elevated",
      "source": "mt-cl-condition",
      "target": "mt-cl-emo-elevated",
      "sourceHandle": "true-0"
    },
    {
      "id": "e-mt-cl-emo-elevated-to-mt-cl-elevated",
      "source": "mt-cl-emo-elevated",
      "target": "mt-cl-elevated"
    }
  ]
}
