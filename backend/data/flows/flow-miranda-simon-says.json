{
  "id": "flow-miranda-simon-says",
  "name": "Miranda's Simon Says",
  "category": "character",
  "description": "Simon challenge memory game. Win earns celebratory pulses; lose means remedial inflation. Session stats track cumulative wins and losses across plays.",
  "isActive": true,
  "createdAt": 1705000000000,
  "updatedAt": 1705000000000,
  "nodes": [
    {
      "id": "miranda-ss-btn",
      "type": "button_press",
      "position": {
        "x": 300,
        "y": 50
      },
      "data": {
        "label": "Simon Says",
        "buttonTarget": "character",
        "buttonId": "miranda-simon",
        "unblockable": false,
        "hasPriority": false
      }
    },
    {
      "id": "miranda-ss-intro",
      "type": "action",
      "position": {
        "x": 300,
        "y": 180
      },
      "data": {
        "label": "Simon Says Intro",
        "actionType": "send_message",
        "message": "Simon Says time! Follow the pattern and prove you've been paying attention in class! *inflates herself a bit for encouragement, patting her belly* A good inflation student needs a sharp memory — your body AND your brain have to work together! Ready?",
        "suppressLlm": false,
        "preMessageEnabled": false,
        "postMessageEnabled": false
      }
    },
    {
      "id": "miranda-ss-simon",
      "type": "simon_challenge",
      "position": {
        "x": 300,
        "y": 370
      },
      "data": {
        "label": "Simon Memory Challenge",
        "startingLength": 3,
        "maxLength": 5,
        "maxMisses": 2,
        "aiMessageWinEnabled": true,
        "aiMessageWin": "Perfect memory! You passed with flying colors!",
        "aiMessageWinSuppressLlm": true,
        "aiMessageLoseEnabled": true,
        "aiMessageLose": "Oops! The pattern got away from you!",
        "aiMessageLoseSuppressLlm": true
      }
    },
    {
      "id": "miranda-ss-win-counter",
      "type": "counter",
      "position": {
        "x": 100,
        "y": 560
      },
      "data": {
        "label": "Track Wins",
        "variable": "simonWins",
        "operation": "increment",
        "amount": 1,
        "initialValue": 0,
        "initializeDefault": true
      }
    },
    {
      "id": "miranda-ss-win-msg",
      "type": "action",
      "position": {
        "x": 100,
        "y": 700
      },
      "data": {
        "label": "Win! Celebration Pulses (x3)",
        "actionType": "pulse_pump",
        "device": "primary_pump",
        "pulses": 3,
        "preMessageEnabled": true,
        "preMessage": "You passed! Excellent memory! *claps hands together* Here's your reward — three celebratory pulses! *pumps herself three times too* We celebrate TOGETHER in this classroom!",
        "preMessageSuppressLlm": true,
        "preDelay": 0,
        "postMessageEnabled": true,
        "postMessage": "*beams with pride* That kind of pattern recognition is exactly what makes a great inflation student! Your brain and belly are working in perfect harmony!",
        "postMessageSuppressLlm": false,
        "postDelay": 1
      }
    },
    {
      "id": "miranda-ss-lose-counter",
      "type": "counter",
      "position": {
        "x": 500,
        "y": 560
      },
      "data": {
        "label": "Track Losses",
        "variable": "simonLosses",
        "operation": "increment",
        "amount": 1,
        "initialValue": 0,
        "initializeDefault": true
      }
    },
    {
      "id": "miranda-ss-lose-msg",
      "type": "action",
      "position": {
        "x": 500,
        "y": 700
      },
      "data": {
        "label": "Lose! Remedial Inflation (10s)",
        "actionType": "device_on",
        "device": "primary_pump",
        "untilType": "timer",
        "untilValue": 10,
        "preMessageEnabled": true,
        "preMessage": "Oh no, you missed it! That means remedial inflation! *starts her own pump too* Don't worry — we'll get through this together! Ten seconds of remedial stretching helps your body remember what your brain forgot!",
        "preMessageSuppressLlm": true,
        "preDelay": 0,
        "postMessageEnabled": true,
        "postMessage": "*rubs her own belly alongside yours* See? Remedial inflation isn't punishment — it's extra practice! Your belly learns even when your memory stumbles. That's the beauty of this method!",
        "postMessageSuppressLlm": false,
        "postDelay": 1
      }
    },
    {
      "id": "miranda-ss-summary",
      "type": "action",
      "position": {
        "x": 300,
        "y": 920
      },
      "data": {
        "label": "Session Stats",
        "actionType": "send_message",
        "message": "Session stats: Wins: [Flow:simonWins], Losses: [Flow:simonLosses]. *looks at your results on her clipboard* Every attempt teaches your body something new! Whether you won or lost, your belly got a workout either way. That's the beauty of this method! *pats both bellies happily*",
        "suppressLlm": false,
        "preMessageEnabled": false,
        "postMessageEnabled": false
      }
    },
    {
      "id": "miranda-ss-emo-start",
      "type": "action",
      "position": {
        "x": 325,
        "y": 275
      },
      "data": {
        "label": "Set Curious",
        "actionType": "set_emotion",
        "emotion": "curious"
      }
    },
    {
      "id": "miranda-ss-emo-win",
      "type": "action",
      "position": {
        "x": 225,
        "y": 465
      },
      "data": {
        "label": "Set Happy",
        "actionType": "set_emotion",
        "emotion": "happy"
      }
    },
    {
      "id": "miranda-ss-emo-lose",
      "type": "action",
      "position": {
        "x": 425,
        "y": 465
      },
      "data": {
        "label": "Set Confused",
        "actionType": "set_emotion",
        "emotion": "confused"
      }
    }
  ],
  "edges": [
    {
      "id": "e1",
      "source": "miranda-ss-btn",
      "target": "miranda-ss-intro"
    },
    {
      "id": "e5",
      "source": "miranda-ss-win-counter",
      "target": "miranda-ss-win-msg"
    },
    {
      "id": "e6",
      "source": "miranda-ss-lose-counter",
      "target": "miranda-ss-lose-msg"
    },
    {
      "id": "e7",
      "source": "miranda-ss-win-msg",
      "target": "miranda-ss-summary"
    },
    {
      "id": "e8",
      "source": "miranda-ss-lose-msg",
      "target": "miranda-ss-summary"
    },
    {
      "id": "e-miranda-ss-intro-to-miranda-ss-emo-start",
      "source": "miranda-ss-intro",
      "target": "miranda-ss-emo-start"
    },
    {
      "id": "e-miranda-ss-emo-start-to-miranda-ss-simon",
      "source": "miranda-ss-emo-start",
      "target": "miranda-ss-simon"
    },
    {
      "id": "e-miranda-ss-simon-to-miranda-ss-emo-win",
      "source": "miranda-ss-simon",
      "target": "miranda-ss-emo-win",
      "sourceHandle": "win"
    },
    {
      "id": "e-miranda-ss-emo-win-to-miranda-ss-win-counter",
      "source": "miranda-ss-emo-win",
      "target": "miranda-ss-win-counter"
    },
    {
      "id": "e-miranda-ss-simon-to-miranda-ss-emo-lose",
      "source": "miranda-ss-simon",
      "target": "miranda-ss-emo-lose",
      "sourceHandle": "lose"
    },
    {
      "id": "e-miranda-ss-emo-lose-to-miranda-ss-lose-counter",
      "source": "miranda-ss-emo-lose",
      "target": "miranda-ss-lose-counter"
    }
  ]
}
