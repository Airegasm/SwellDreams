{
  "id": "flow-scarlett-punishment",
  "name": "Punishment Sequence",
  "category": "character",
  "description": "Timer challenge endurance test with device punishment",
  "isActive": false,
  "createdAt": 1705000000000,
  "updatedAt": 1770907352300,
  "nodes": [
    {
      "id": "scarlett-pn-btn",
      "type": "button_press",
      "position": {
        "x": 92.59933239797078,
        "y": -73.69687277677454
      },
      "data": {
        "label": "Endurance Test",
        "buttonTarget": "character",
        "buttonId": "scarlett-endure",
        "unblockable": false,
        "hasPriority": false
      },
      "measured": {
        "width": 277,
        "height": 240
      },
      "selected": false,
      "dragging": false
    },
    {
      "id": "scarlett-mercy-btn",
      "type": "button_press",
      "position": {
        "x": -297.2659170552415,
        "y": -14.491531960540554
      },
      "data": {
        "label": "Beg for Mercy",
        "buttonTarget": "character",
        "buttonId": "scarlett-mercy",
        "unblockable": false,
        "hasPriority": false
      },
      "measured": {
        "width": 277,
        "height": 240
      },
      "selected": false,
      "dragging": false
    },
    {
      "id": "scarlett-mercy-decide",
      "type": "branch",
      "position": {
        "x": -200,
        "y": 180
      },
      "data": {
        "label": "Mistress Decides",
        "branchType": "random",
        "branches": [
          {
            "id": "granted",
            "label": "Mercy Granted",
            "weight": 30
          },
          {
            "id": "denied",
            "label": "Mercy Denied",
            "weight": 50
          },
          {
            "id": "worse",
            "label": "Made It Worse",
            "weight": 20
          }
        ]
      },
      "measured": {
        "width": 252,
        "height": 197
      }
    },
    {
      "id": "scarlett-mercy-granted",
      "type": "action",
      "position": {
        "x": -350,
        "y": 350
      },
      "data": {
        "label": "Mercy Granted",
        "actionType": "send_message",
        "message": "*pauses, considering your pleading eyes* ...You beg so prettily. *traces finger along your jaw* Very well. I'm feeling generous today. Consider this a rare gift - don't expect it again.",
        "suppressLlm": false,
        "preMessageEnabled": false,
        "postMessageEnabled": false
      },
      "measured": {
        "width": 257,
        "height": 201
      }
    },
    {
      "id": "scarlett-mercy-denied",
      "type": "action",
      "position": {
        "x": -200,
        "y": 350
      },
      "data": {
        "label": "Mercy Denied",
        "actionType": "send_message",
        "message": "*laughs coldly* Mercy? *leans close* You think begging will move me? I decide when you've had enough. Your pleas only amuse me. Now... where were we?",
        "suppressLlm": false,
        "preMessageEnabled": false,
        "postMessageEnabled": false
      },
      "measured": {
        "width": 257,
        "height": 201
      }
    },
    {
      "id": "scarlett-mercy-worse",
      "type": "action",
      "position": {
        "x": -375.00895290967594,
        "y": 843.8985610057481
      },
      "data": {
        "label": "Made It Worse",
        "actionType": "pulse_pump",
        "device": "primary_pump",
        "pulses": 5,
        "preMessageEnabled": true,
        "preMessage": "*eyes flash dangerously* Mercy? You DARE ask for mercy without permission? *activates device* I'll teach you the cost of that mistake.",
        "preMessageSuppressLlm": true,
        "preDelay": 1,
        "postMessageEnabled": true,
        "postMessage": "*smirks* That's what happens when you speak out of turn. Remember your place.",
        "postMessageSuppressLlm": false,
        "postDelay": 1
      },
      "measured": {
        "width": 257,
        "height": 388
      },
      "selected": false,
      "dragging": false
    },
    {
      "id": "scarlett-pn-intro",
      "type": "action",
      "position": {
        "x": 484.5704057483052,
        "y": 3.043886188276531
      },
      "data": {
        "label": "Challenge Setup",
        "actionType": "send_message",
        "message": "*circling you slowly* You think you've learned discipline? Let's put that to the test. You will endure what I give you for 60 seconds without pressing the escape button. Fail, and the punishment extends. Succeed... and you may impress me.",
        "suppressLlm": true,
        "preMessageEnabled": false,
        "postMessageEnabled": false
      },
      "measured": {
        "width": 257,
        "height": 201
      },
      "selected": false,
      "dragging": false
    },
    {
      "id": "scarlett-pn-start-device",
      "type": "action",
      "position": {
        "x": 853.76254130553,
        "y": -21.190986232011483
      },
      "data": {
        "label": "Start Pressure",
        "actionType": "device_on",
        "device": "primary_pump",
        "untilType": "timer",
        "untilValue": 60,
        "preMessageEnabled": false,
        "preMessage": "*activates device* The challenge begins now.",
        "preMessageSuppressLlm": true,
        "preDelay": 1,
        "postMessageEnabled": false
      },
      "measured": {
        "width": 257,
        "height": 222
      },
      "selected": false,
      "dragging": false
    },
    {
      "id": "scarlett-pn-timer",
      "type": "timer_challenge",
      "position": {
        "x": 440.7324149088586,
        "y": 559.4335372162296
      },
      "data": {
        "label": "Endurance Timer",
        "mode": "escape",
        "duration": 60,
        "escapeWindow": 500,
        "preMessageEnabled": false,
        "postMessageEnabled": false
      },
      "measured": {
        "width": 264,
        "height": 223
      },
      "selected": false,
      "dragging": false
    },
    {
      "id": "scarlett-pn-success-stop",
      "type": "action",
      "position": {
        "x": 442.83342652089914,
        "y": 882.7292896264319
      },
      "data": {
        "label": "Stop Device",
        "actionType": "device_off",
        "device": "primary_pump",
        "preMessageEnabled": false,
        "postMessageEnabled": false
      },
      "measured": {
        "width": 257,
        "height": 160
      },
      "selected": false,
      "dragging": false
    },
    {
      "id": "scarlett-pn-success-msg",
      "type": "action",
      "position": {
        "x": 676.0186220521259,
        "y": 1052.7536309477346
      },
      "data": {
        "label": "Success Message",
        "actionType": "send_message",
        "message": "*pauses, studies you* ...Impressive. You endured. Perhaps there is potential in you after all. *slight smile* You may rest...for now.",
        "suppressLlm": true,
        "preMessageEnabled": false,
        "postMessageEnabled": false
      },
      "measured": {
        "width": 257,
        "height": 201
      },
      "selected": false,
      "dragging": false
    },
    {
      "id": "scarlett-pn-fail-msg",
      "type": "action",
      "position": {
        "x": 1041.809439335109,
        "y": 616.270889370405
      },
      "data": {
        "label": "Failure Message",
        "actionType": "send_message",
        "message": "*disappointed sigh* Pathetic. You couldn't even last 60 seconds. Now you'll experience an extended session as penance.",
        "suppressLlm": true,
        "preMessageEnabled": false,
        "postMessageEnabled": false
      },
      "measured": {
        "width": 257,
        "height": 201
      },
      "selected": false,
      "dragging": false
    },
    {
      "id": "scarlett-pn-fail-extend",
      "type": "action",
      "position": {
        "x": 1036.5335633726534,
        "y": 895.1204191627647
      },
      "data": {
        "label": "Extended Punishment",
        "actionType": "start_cycle",
        "device": "primary_pump",
        "duration": 5,
        "interval": 3,
        "cycles": 10,
        "preMessageEnabled": true,
        "preMessage": "*activates extended cycle* Count this as a lesson in consequences. 10 cycles of five seconds each. This time, no escape button. *She cackles*",
        "preMessageSuppressLlm": true,
        "preDelay": 0,
        "postMessageEnabled": false,
        "postMessage": "*regards you coldly* Next time, perhaps you'll try harder. Dismissed.",
        "postMessageSuppressLlm": true,
        "postDelay": 2
      },
      "measured": {
        "width": 257,
        "height": 381
      },
      "selected": true,
      "dragging": false
    },
    {
      "id": "node_1",
      "type": "action",
      "position": {
        "x": 1056.2866955696286,
        "y": 357.7704370452225
      },
      "data": {
        "label": "Send Player Message",
        "actionType": "send_player_message",
        "message": "I can't take any more!! *I yell as I press the STOP button frantically.*",
        "suppressLlm": true,
        "preMessageEnabled": false,
        "preMessage": "",
        "preMessageSuppressLlm": false,
        "preMessageTarget": "character",
        "preDelay": 0,
        "postMessageEnabled": false,
        "postMessage": "",
        "postMessageSuppressLlm": false,
        "postMessageTarget": "character",
        "postDelay": 0
      },
      "measured": {
        "width": 257,
        "height": 201
      },
      "selected": false,
      "dragging": false
    },
    {
      "id": "node_2",
      "type": "action",
      "position": {
        "x": 120,
        "y": 120
      },
      "data": {
        "label": "Stop Device",
        "actionType": "device_off",
        "device": "primary_pump",
        "preMessageEnabled": false,
        "postMessageEnabled": false
      },
      "measured": {
        "width": 257,
        "height": 160
      }
    },
    {
      "id": "node_3",
      "type": "action",
      "position": {
        "x": 750.8864094379923,
        "y": 340.6976627173444
      },
      "data": {
        "label": "Turn Device Off",
        "actionType": "device_off",
        "device": "primary_pump",
        "preMessageEnabled": false,
        "preMessage": "",
        "preMessageSuppressLlm": false,
        "preMessageTarget": "character",
        "preDelay": 0,
        "postMessageEnabled": false,
        "postMessage": "",
        "postMessageSuppressLlm": false,
        "postMessageTarget": "character",
        "postDelay": 0
      },
      "measured": {
        "width": 257,
        "height": 160
      },
      "selected": false,
      "dragging": false
    }
  ],
  "edges": [
    {
      "id": "mercy-e1",
      "source": "scarlett-mercy-btn",
      "target": "scarlett-mercy-decide"
    },
    {
      "id": "mercy-e2",
      "source": "scarlett-mercy-decide",
      "sourceHandle": "branch-0",
      "target": "scarlett-mercy-granted"
    },
    {
      "id": "mercy-e3",
      "source": "scarlett-mercy-decide",
      "sourceHandle": "branch-1",
      "target": "scarlett-mercy-denied"
    },
    {
      "id": "mercy-e4",
      "source": "scarlett-mercy-decide",
      "sourceHandle": "branch-2",
      "target": "scarlett-mercy-worse"
    },
    {
      "id": "e1",
      "source": "scarlett-pn-btn",
      "target": "scarlett-pn-intro",
      "selected": false
    },
    {
      "id": "e2",
      "source": "scarlett-pn-intro",
      "target": "scarlett-pn-start-device",
      "selected": false
    },
    {
      "id": "e3",
      "source": "scarlett-pn-start-device",
      "sourceHandle": "immediate",
      "target": "scarlett-pn-timer",
      "selected": false
    },
    {
      "id": "e4",
      "source": "scarlett-pn-timer",
      "sourceHandle": "success",
      "target": "scarlett-pn-success-stop",
      "selected": false
    },
    {
      "id": "e6",
      "source": "scarlett-pn-success-stop",
      "target": "scarlett-pn-success-msg",
      "selected": false
    },
    {
      "source": "scarlett-pn-fail-msg",
      "target": "scarlett-pn-fail-extend",
      "animated": true,
      "id": "xy-edge__scarlett-pn-fail-msg-scarlett-pn-fail-extend"
    },
    {
      "source": "scarlett-pn-timer",
      "sourceHandle": "timeout",
      "target": "node_3",
      "animated": true,
      "id": "xy-edge__scarlett-pn-timertimeout-node_3"
    },
    {
      "source": "node_3",
      "target": "node_1",
      "animated": true,
      "id": "xy-edge__node_3-node_1"
    },
    {
      "source": "node_1",
      "target": "scarlett-pn-fail-msg",
      "animated": true,
      "id": "xy-edge__node_1-scarlett-pn-fail-msg"
    }
  ],
  "groups": []
}