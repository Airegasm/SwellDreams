{
  "id": "21aa847d-490d-43d8-9374-7ebd90f3507d",
  "name": "Dr. Chen's Protocol Auto-Start",
  "category": "character",
  "description": "First player message triggers protocol selection",
  "isActive": true,
  "createdAt": 1737158400000,
  "updatedAt": 1737158400000,
  "nodes": [
    {
      "id": "2e96d532-0167-4995-b444-5d72ec6ba149",
      "type": "trigger",
      "position": {
        "x": 250,
        "y": 50
      },
      "data": {
        "label": "First Player Message",
        "triggerType": "first_message",
        "unblockable": false,
        "notify": false,
        "hasPriority": false
      }
    },
    {
      "id": "f93730c8-8b5a-410c-a0f8-935ee3c62c52",
      "type": "action",
      "position": {
        "x": 250,
        "y": 180
      },
      "data": {
        "label": "Protocol Selection",
        "actionType": "send_message",
        "message": "*glances at clipboard, then back at you* Noted. *adjusts glasses* The randomization algorithm has selected today's protocol. Your input is... not required.",
        "suppressLlm": false,
        "preMessageEnabled": false,
        "postMessageEnabled": false,
        "postDelay": 2
      }
    },
    {
      "id": "c00980bf-7f74-4414-ad56-fa625a7f7231",
      "type": "branch",
      "position": {
        "x": 250,
        "y": 320
      },
      "data": {
        "label": "Select Protocol",
        "branchType": "random",
        "branches": [
          {
            "id": "data",
            "label": "Data Collection",
            "weight": 33
          },
          {
            "id": "capacity",
            "label": "Capacity Study",
            "weight": 34
          },
          {
            "id": "threshold",
            "label": "Threshold Testing",
            "weight": 33
          }
        ]
      }
    },
    {
      "id": "9cd921c0-2e5e-43a5-8c77-ba6eec767393",
      "type": "action",
      "position": {
        "x": 0,
        "y": 480
      },
      "data": {
        "label": "Start Data Collection",
        "actionType": "link_to_flow",
        "flowId": "flow-iris-data-collection",
        "flowNodeId": "iris-dc-intro",
        "preMessageEnabled": true,
        "preMessage": "*nods* Data Collection Protocol. Standard procedure - we'll be measuring your baseline responses. *prepares equipment* Try to remain still.",
        "preMessageTarget": "character",
        "preMessageSuppressLlm": false,
        "preDelay": 1,
        "postMessageEnabled": false
      }
    },
    {
      "id": "340390f3-f431-4951-a0c1-45d0c06eec43",
      "type": "action",
      "position": {
        "x": 250,
        "y": 480
      },
      "data": {
        "label": "Start Capacity Study",
        "actionType": "link_to_flow",
        "flowId": "flow-iris-capacity-study",
        "flowNodeId": "iris-cs-intro",
        "preMessageEnabled": true,
        "preMessage": "*slight interest flickers* Capacity Study Protocol. *adjusts monitors* This requires extended observation. Your comfort is... noted but secondary.",
        "preMessageTarget": "character",
        "preMessageSuppressLlm": false,
        "preDelay": 1,
        "postMessageEnabled": false
      }
    },
    {
      "id": "10427593-ed9d-44a8-bd4f-184b98141374",
      "type": "action",
      "position": {
        "x": 500,
        "y": 480
      },
      "data": {
        "label": "Start Threshold Testing",
        "actionType": "link_to_flow",
        "flowId": "flow-iris-threshold-testing",
        "flowNodeId": "iris-tt-intro",
        "preMessageEnabled": true,
        "preMessage": "*a rare hint of anticipation* Threshold Testing Protocol. *checks equipment* This is where we push boundaries, Subject #47.",
        "preMessageTarget": "character",
        "preMessageSuppressLlm": false,
        "preDelay": 1,
        "postMessageEnabled": false
      }
    }
  ],
  "edges": [
    {
      "id": "d2fbf51c-084b-452d-a4de-f9ff76a564cb",
      "source": "2e96d532-0167-4995-b444-5d72ec6ba149",
      "target": "f93730c8-8b5a-410c-a0f8-935ee3c62c52"
    },
    {
      "id": "c08c95b4-08e4-4f92-aa62-d4c0ebb010cd",
      "source": "f93730c8-8b5a-410c-a0f8-935ee3c62c52",
      "target": "c00980bf-7f74-4414-ad56-fa625a7f7231"
    },
    {
      "id": "9414c8e3-64c9-4294-9d4a-c6aeb61392f2",
      "source": "c00980bf-7f74-4414-ad56-fa625a7f7231",
      "sourceHandle": "branch-0",
      "target": "9cd921c0-2e5e-43a5-8c77-ba6eec767393"
    },
    {
      "id": "5ec710b2-d4a9-4b5c-8330-cd76c39239a1",
      "source": "c00980bf-7f74-4414-ad56-fa625a7f7231",
      "sourceHandle": "branch-1",
      "target": "340390f3-f431-4951-a0c1-45d0c06eec43"
    },
    {
      "id": "5b35aae6-0be2-47af-8a7a-2a2072533996",
      "source": "c00980bf-7f74-4414-ad56-fa625a7f7231",
      "sourceHandle": "branch-2",
      "target": "10427593-ed9d-44a8-bd4f-184b98141374"
    }
  ],
  "characterId": "a5b646e5-956d-498e-860c-3821b2a550f1"
}