{
  "id": "flow-miranda-capacity-challenge",
  "name": "Miranda's Capacity Challenge",
  "category": "character",
  "description": "Player chooses stretch intensity — small, medium, or maximum. Miranda matches, with increasing enthusiasm.",
  "isActive": true,
  "createdAt": 1705000000000,
  "updatedAt": 1705000000000,
  "nodes": [
    {
      "id": "miranda-cap-btn",
      "type": "button_press",
      "position": {
        "x": 200,
        "y": 50
      },
      "data": {
        "label": "Capacity Challenge",
        "buttonTarget": "character",
        "buttonId": "miranda-challenge",
        "unblockable": false,
        "hasPriority": false
      }
    },
    {
      "id": "miranda-cap-choice",
      "type": "player_choice",
      "position": {
        "x": 200,
        "y": 180
      },
      "data": {
        "label": "Choose your stretch level",
        "description": "Miranda wants to push your capacity. How far do you want to go?",
        "introMessageEnabled": true,
        "introMessage": "*Miranda claps her hands together* \"Alright! Capacity challenge time! This is my FAVORITE part of the lesson!\"\n\n*she pumps a bit of air into herself in anticipation* \"Here's how it works: you pick a stretch level, and we BOTH do it at the same time. I'll match whatever you choose! Small stretch is a gentle push, medium is a real workout, and maximum effort is...\" *grins* \"...well, maximum effort! I'll be right there with you the whole way!\"\n\n*wiggles excitedly* \"So what's it gonna be?\"",
        "introMessageSuppressLlm": false,
        "choices": [
          {
            "id": "small",
            "label": "Small Stretch",
            "description": "5-second gentle push"
          },
          {
            "id": "medium",
            "label": "Medium Push",
            "description": "10-second real workout"
          },
          {
            "id": "maximum",
            "label": "Maximum Effort",
            "description": "15-second full capacity test"
          }
        ]
      }
    },
    {
      "id": "miranda-cap-small",
      "type": "action",
      "position": {
        "x": 0,
        "y": 400
      },
      "data": {
        "label": "Small Stretch (5s)",
        "actionType": "device_on",
        "device": "primary_pump",
        "untilType": "timer",
        "untilValue": 5,
        "preMessageEnabled": true,
        "preMessage": "\"Small stretch — good choice for building confidence!\" *Miranda starts her own pump at the same pace* \"Five seconds together! Remember your breathing — in through the nose, out through the mouth! Here we go!\"",
        "preMessageSuppressLlm": true,
        "preDelay": 0,
        "postMessageEnabled": true,
        "postMessage": "*Miranda pats her belly* \"Nice! A good gentle stretch! See how your belly expanded just a little bit more?\" *compares their two bellies* \"That's exactly how capacity building works — small, consistent stretches that teach your body to accept more volume over time.\"\n\n\"You could have gone bigger, but there's nothing wrong with starting small! We'll build up to the bigger challenges as your confidence grows!\"",
        "postMessageSuppressLlm": false,
        "postDelay": 2
      }
    },
    {
      "id": "miranda-cap-medium",
      "type": "action",
      "position": {
        "x": 200,
        "y": 400
      },
      "data": {
        "label": "Medium Push (10s)",
        "actionType": "device_on",
        "device": "primary_pump",
        "untilType": "timer",
        "untilValue": 10,
        "preMessageEnabled": true,
        "preMessage": "\"Medium push! Now we're talking!\" *Miranda's eyes light up as she starts her own pump* \"Ten seconds — this is going to be a REAL workout for our bellies! Breathe through it! Don't clench!\"\n\n*she places a hand on her own expanding belly* \"Feel the stretch? LEAN into it! Let your body open up! Here we GO!\"",
        "preMessageSuppressLlm": true,
        "preDelay": 0,
        "postMessageEnabled": true,
        "postMessage": "*Miranda exhales with a grin, hands on her noticeably larger belly* \"WOW! Ten seconds! Did you feel how your belly pushed out further around the seven-second mark? That was your intestines hitting a temporary wall and then accommodating past it!\"\n\n*she glances between their two swollen bellies, lingering a bit* \"You're... looking really good! I mean — your form! Your BREATHING form was really good!\" *fans herself slightly* \"That was a solid medium challenge. Your capacity is definitely growing!\"",
        "postMessageSuppressLlm": false,
        "postDelay": 2
      }
    },
    {
      "id": "miranda-cap-max",
      "type": "action",
      "position": {
        "x": 400,
        "y": 400
      },
      "data": {
        "label": "Maximum Effort (15s)",
        "actionType": "device_on",
        "device": "primary_pump",
        "untilType": "timer",
        "untilValue": 15,
        "preMessageEnabled": true,
        "preMessage": "\"MAXIMUM EFFORT! Yes! YES!\" *Miranda is practically vibrating with excitement as she cranks her own pump* \"Fifteen seconds! This is the big one! We're going ALL the way!\"\n\n*she locks eyes with [Player], her own belly already starting to push outward* \"I'm right here with you! Every second, every stretch — together! Don't you DARE hold your breath! BREATHE and GROW!\"",
        "preMessageSuppressLlm": true,
        "preDelay": 0,
        "postMessageEnabled": true,
        "postMessage": "*Miranda is breathing hard, both hands on her massively swollen belly, face flushed bright red*\n\n\"Oh my god. Oh my GOD! Fifteen seconds at full capacity!\" *she stares at [Player]'s enormous belly with her mouth slightly open* \"Look at you! LOOK at your belly! It's so big and round and— and—\" *catches herself, clears her throat forcefully*\n\n\"—and an EXCELLENT demonstration of maximum accommodation response! A-plus!\" *she fans her face with her hand, clearly affected* \"I need — I mean WE need — a moment to recover. That was... from a pure TECHNIQUE standpoint... breathtaking.\"\n\n*sits down quickly, crossing her legs* \"Amazing work! Just... amazing. Wow.\"",
        "postMessageSuppressLlm": false,
        "postDelay": 2
      }
    },
    {
      "id": "miranda-cap-emo-start",
      "type": "action",
      "position": {
        "x": 225,
        "y": 115
      },
      "data": {
        "label": "Set Curious",
        "actionType": "set_emotion",
        "emotion": "curious"
      }
    },
    {
      "id": "miranda-cap-emo-max",
      "type": "action",
      "position": {
        "x": 292,
        "y": 253
      },
      "data": {
        "label": "Set Excited",
        "actionType": "set_emotion",
        "emotion": "excited"
      }
    },
    {
      "id": "miranda-cap-attr-max",
      "type": "action",
      "position": {
        "x": 358,
        "y": 327
      },
      "data": {
        "label": "Raise Sensual",
        "actionType": "set_attribute",
        "attribute": "sensual",
        "attributeValue": 70
      }
    }
  ],
  "edges": [
    {
      "id": "e2",
      "source": "miranda-cap-choice",
      "sourceHandle": "small",
      "target": "miranda-cap-small"
    },
    {
      "id": "e3",
      "source": "miranda-cap-choice",
      "sourceHandle": "medium",
      "target": "miranda-cap-medium"
    },
    {
      "id": "e-miranda-cap-btn-to-miranda-cap-emo-start",
      "source": "miranda-cap-btn",
      "target": "miranda-cap-emo-start"
    },
    {
      "id": "e-miranda-cap-emo-start-to-miranda-cap-choice",
      "source": "miranda-cap-emo-start",
      "target": "miranda-cap-choice"
    },
    {
      "id": "e-miranda-cap-choice-to-miranda-cap-emo-max",
      "source": "miranda-cap-choice",
      "target": "miranda-cap-emo-max",
      "sourceHandle": "maximum"
    },
    {
      "id": "e-miranda-cap-emo-max-to-miranda-cap-attr-max",
      "source": "miranda-cap-emo-max",
      "target": "miranda-cap-attr-max"
    },
    {
      "id": "e-miranda-cap-attr-max-to-miranda-cap-max",
      "source": "miranda-cap-attr-max",
      "target": "miranda-cap-max"
    }
  ]
}
